// 像素着色器，对于每个像素
void main() {
    // 采样循环
    for (int i = 0; i < N_SAMPLES; i++) {
        pos = 相机位置; // 当前追踪到的位置
        dir = 根据像素位置计算光线方向 + 随机抖动; // 当前追踪的方向
        for (int j = 0; j < N_STEPS; j++) {
            迭代更新pos、dir // 光线步进
            if (光线与吸积盘相交) 混合颜色，更新透明度;
            if (光线与事件视界相交) 混合颜色，更新透明度;
            if (光线与...相交) 混合颜色，更新透明度;
        }
        混合星空背景颜色;
    }
    求平均颜色，输出;
}